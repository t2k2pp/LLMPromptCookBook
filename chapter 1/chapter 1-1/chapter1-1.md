# 第1章 基本的なプロンプトパターン

## 1.1 プロンプトエンジニアリングの基礎

本章では、効果的なプロンプトを設計するための基本的なパターンを学びます。プロンプトエンジニアリングは、LLMの能力を最大限に引き出すための重要なスキルです。

### レシピ1-1: プロンプトの基本構造と設計原則

#### 課題（Problem）
開発者は多くの場合、曖昧な指示やコンテキスト不足のプロンプトを書いてしまい、期待した結果が得られないことがあります。特に、コードの生成やレビューにおいて、この問題は顕著です。

#### 解決方法（Solution）
プロンプトを以下の4つの要素で構造化することで、LLMからより適切な応答を引き出すことができます：

1. **ロール（Role）**: LLMに期待する役割の明確化
2. **コンテキスト（Context）**: タスクの背景情報と制約条件
3. **指示（Instruction）**: 具体的なタスクの内容
4. **出力形式（Format）**: 期待する出力の形式や構造

#### プロンプト例

悪い例：
```
TypeScriptでAPIエンドポイントを作成してください。
```

良い例：
```
ロール：
あなたは、TypeScriptとExpress.jsに精通したシニアバックエンドエンジニアです。

コンテキスト：
- REST APIの開発プロジェクト
- TypeScript 5.0とExpress.js 4.18を使用
- OpenAPI (Swagger) ドキュメントが必要
- エラーハンドリングは集中管理が必要

タスク：
ユーザー情報を取得するAPIエンドポイント（GET /api/v1/users/:id）を実装してください。

要件：
1. TypeScriptの型安全性を確保
2. エラーハンドリングを適切に実装
3. OpenAPI仕様に準拠したコメント
4. ユニットテストのサンプルも含める

出力形式：
1. エンドポイントの実装コード
2. 関連する型定義
3. テストコードのサンプル
```

#### 実行結果
このような構造化されたプロンプトを使用することで、以下のような利点が得られます：
- [recipe1-1-code.ts](https://github.com/t2k2pp/LLMPromptCookBook/blob/main/chapter%201/chapter%201-1/recipe1-1-code.ts)

1. より具体的で実用的なコード生成
2. 一貫性のある実装スタイル
3. 必要な補足情報（型定義やテスト）の自動生成
4. メンテナンス性の高いコード

#### 改善ポイント

1. **コンテキストの具体化**
   - プロジェクトの特定の制約や規約
   - 既存のコードベースの特徴
   - パフォーマンス要件

2. **出力形式の詳細化**
   - ファイル構造の指定
   - 命名規則の明示
   - コメントスタイルの指定

3. **品質基準の明確化**
   - コードカバレッジの要件
   - パフォーマンス基準
   - セキュリティ要件

#### Best Practices

1. **ロールの適切な設定**
   - プロジェクトの文脈に合った専門性を指定
   - 具体的な技術スタックへの言及
   - 品質基準の明示

2. **コンテキストの階層化**
   - プロジェクトレベルの情報
   - 技術スタックの詳細
   - 特定のタスクに関する制約

3. **指示の明確化**
   - タスクの優先順位
   - 具体的な制約条件
   - 期待される品質基準

### Tips

- プロンプトテンプレートを作成し、チーム内で共有する
- プロジェクト固有の要件や規約をテンプレートに組み込む
- 結果の評価基準を事前に定義する

### Warning

- 過度に複雑なプロンプトは避ける
- 重要な仕様は必ず明示的に指定する
- セキュリティに関する制約は特に注意して指定する

### 関連レシピ
- レシピ1-2: コンテキストの効果的な提供方法
- レシピ1-3: 制約条件の明示的な指定
- レシピ2-1: ボイラープレートコードの生成
