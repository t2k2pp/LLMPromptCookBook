# レシピ1-5: エッジケースの考慮と対処

## 課題（Problem）
LLMを使用したコード生成では、主要な機能は適切に実装されるものの、以下のようなエッジケースが見落とされがちです：

- 異常系の処理
- 境界値の処理
- 並行処理時の競合
- リソース制約への対応
- 予期しない入力値

## 解決方法（Solution）
プロンプトの中でエッジケースを明示的に指定し、それらへの対処方法を要求します。

1. エッジケースの体系的な列挙
2. 具体的な処理方法の指定
3. テストケースの要求
4. エラーハンドリングの明確化

## プロンプト例

### 基本的なプロンプト
```
ユーザー登録APIを実装してください。
```

### エッジケースを考慮したプロンプト
```
タスク：ユーザー登録APIの実装

基本仕様：
- メールアドレスとパスワードによる登録
- プロフィール情報の保存
- 確認メールの送信

考慮すべきエッジケース：

1. 入力値の異常
   - 無効なメールアドレスフォーマット
   - パスワード強度不足
   - 禁止文字の使用
   - 極端に長い入力値

2. 重複と競合
   - メールアドレスの重複
   - 同時登録リクエスト
   - 一時的なデータ不整合

3. システムの制約
   - データベース接続エラー
   - メール送信失敗
   - ストレージ容量不足
   - 高負荷時の処理

4. セキュリティ考慮
   - インジェクション攻撃
   - レート制限超過
   - 不正なIPからのアクセス
   - トークンの有効期限切れ

要求事項：
1. 各エッジケースに対する適切なエラーハンドリング
2. エラーメッセージの国際化対応
3. 詳細なログ記録
4. リトライ機構の実装
5. テストケースの提供
```

## 実装例